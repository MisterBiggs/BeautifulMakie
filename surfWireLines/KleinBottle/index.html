<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/BeautifulMakie/libs/highlight/github.min.css"> <script src="/BeautifulMakie/libs/clipboard.min.js"></script> <link rel=stylesheet  href="/BeautifulMakie/css/franklin.css"> <link rel=stylesheet  href="/BeautifulMakie/css/jtd.css"> <link rel=stylesheet  href="/BeautifulMakie/css/extras.css"> <title>KleinBottle</title> <script src="/BeautifulMakie/libs/lunr/lunr.min.js"></script> <script src="/BeautifulMakie/libs/lunr/lunr_index.js"></script> <script src="/BeautifulMakie/libs/lunr/lunrclient.min.js"></script> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/BeautifulMakie/" class=title > <font color = "#5D6D7E"> Beautiful Makie </font> </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <p><a href="https://github.com/lazarusA/BeautifulMakie"> <img align=left  src="https://img.shields.io/github/stars/lazarusA/BeautifulMakie?style&#61;social" alt=Stars  /></a></p> <br> <form id=lunrSearchForm  name=lunrSearchForm > <input class=search-input  name=q  placeholder=Search...  type=text  style="height:20px;width:150px;font-size:12pt;border-radius:10px;"> <input type=submit  value=Search  formaction="/BeautifulMakie/search/index.html" style="height:20px;width:100px;font-size:12pt;"> </form> <br> <ul class=menu-list > <li class="menu-list-item "><a href="/BeautifulMakie/" class=menu-list-link >• Home</a> <li class="menu-list-parent "><a href="/BeautifulMakie/ScattersLines/" class=menu-list-link >• Lines and Scatters</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/" class=menu-list-link >Single line</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/twolines/" class=menu-list-link >Two lines</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/lineScatter/" class=menu-list-link >Line with scatter</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/linesScatters/" class=menu-list-link >Lines with scatters</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/linesAndScatters/" class=menu-list-link >Lines and scatters</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/ScattersCmaps/" class=menu-list-link >Scatters and colormaps</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/BubblePlot/" class=menu-list-link >Bubble Plot</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/LineLogx/" class=menu-list-link >Log scale in x</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/LineLogy/" class=menu-list-link >Log scale in y</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/LineLogxy/" class=menu-list-link >Log scale in x and y</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/ScatterLogxyCbar/" class=menu-list-link >Log scale in x and y, scatters and colormap</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/linesAndScattersLegOut/" class=menu-list-link >Lines and scatters (legend out)</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/MulticoloredLinesLegOut/" class=menu-list-link >Multicolored lines (legend out)</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/MulticoloredLinesCbarOut/" class=menu-list-link >Multicolored lines (colorbar out)</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/LinesAndMulticoloredLineCbarOut/" class=menu-list-link >Lines and multicolored lines</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/MultipleMulticoloredLineCbarOut/" class=menu-list-link >Multiple lines with different colormaps</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/MultipleMulticoloredLineCbarAround/" class=menu-list-link >Multiple lines with different colormaps (colorbars around plot)</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/LineWithInset/" class=menu-list-link >Line with inset</a> <li class="menu-list-item "><a href="/BeautifulMakie/ScattersLines/LineWithInsetHeatmap/" class=menu-list-link >Line with an inset heatmap</a> </ul> <li class="menu-list-parent "><a href="/BeautifulMakie/FilledCurves/" class=menu-list-link >• Filled Curves</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/BeautifulMakie/FilledCurves/" class=menu-list-link >Filled Line</a> <li class="menu-list-item "><a href="/BeautifulMakie/FilledCurves/FilledLines/" class=menu-list-link >Filled Lines, bell shaped curves</a> <li class="menu-list-item "><a href="/BeautifulMakie/FilledCurves/Bands/" class=menu-list-link >Bands</a> <li class="menu-list-item "><a href="/BeautifulMakie/FilledCurves/ConfidenceRegion/" class=menu-list-link >Confidence Region</a> </ul> <li class="menu-list-parent "><a href="/BeautifulMakie/FlowFields/" class=menu-list-link >• Flow Fields</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/BeautifulMakie/FlowFields/" class=menu-list-link >Arrows</a> <li class="menu-list-item "><a href="/BeautifulMakie/FlowFields/streamplot/" class=menu-list-link >Streamplot</a> <li class="menu-list-item "><a href="/BeautifulMakie/FlowFields/streamplotAndHeatmap/" class=menu-list-link >Streamplot and heatmap</a> <li class="menu-list-item "><a href="/BeautifulMakie/FlowFields/streamplots3/" class=menu-list-link >3 streamplots fields</a> <li class="menu-list-item "><a href="/BeautifulMakie/FlowFields/complexPolyaField/" class=menu-list-link >Complex function and Pólya Field</a> </ul> <li class="menu-list-parent "><a href="/BeautifulMakie/StatsPlots/" class=menu-list-link >• Statistical plots</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/" class=menu-list-link >Histograms, bins and counts</a> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/histogramsNorms/" class=menu-list-link >Histograms and normalization</a> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/histDensity/" class=menu-list-link >Histogram and pdf => density!</a> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/BoxPlot/" class=menu-list-link >Box Plots, vertical and horizontal</a> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/ViolinPlot/" class=menu-list-link >Violin Plot</a> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/BarViolinDataSet/" class=menu-list-link >Bars and Violins using RDatasets</a> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/DensitiesDataSet/" class=menu-list-link >Density plots using RDatasets</a> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/BoxErrorBars/" class=menu-list-link >Boxes and y error bars</a> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/xBoxErrorBars/" class=menu-list-link >x-error boxes and y-error bars</a> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/BoxErrorBarsCmap/" class=menu-list-link >Boxes and y error bars, colormap</a> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/xyerrorbars/" class=menu-list-link >Simple xy error bars</a> <li class="menu-list-item "><a href="/BeautifulMakie/StatsPlots/yerrorbars/" class=menu-list-link >Simple y error bars + colormap</a> </ul> <li class="menu-list-parent "><a href="/BeautifulMakie/heatmaps/" class=menu-list-link >• Heatmaps plots</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/BeautifulMakie/heatmaps/" class=menu-list-link >Simple heatmap</a> <li class="menu-list-item "><a href="/BeautifulMakie/heatmaps/heatmapIrregular/" class=menu-list-link >Heatmap with an irregular grid</a> <li class="menu-list-item "><a href="/BeautifulMakie/heatmaps/heatmapLogIrregular/" class=menu-list-link >Heatmap with an irregular grid, log scales</a> <li class="menu-list-item "><a href="/BeautifulMakie/heatmaps/heatmapCbarLeft/" class=menu-list-link >Heatmap, left colorbar</a> <li class="menu-list-item "><a href="/BeautifulMakie/heatmaps/heatmapCbarTop/" class=menu-list-link >Heatmap, top colorbar</a> <li class="menu-list-item "><a href="/BeautifulMakie/heatmaps/heatmapCbarBottom/" class=menu-list-link >Heatmap, bottom colorbar</a> <li class="menu-list-item "><a href="/BeautifulMakie/heatmaps/heatmapxyz/" class=menu-list-link >Heatmap with x,y,z values</a> <li class="menu-list-item "><a href="/BeautifulMakie/heatmaps/heatmapGrid/" class=menu-list-link >Grid of Heatmaps</a> <li class="menu-list-item "><a href="/BeautifulMakie/heatmaps/heatmap2SharedCbars/" class=menu-list-link >Heatmaps, shared colorbars</a> <li class="menu-list-item "><a href="/BeautifulMakie/heatmaps/heatmap1SharedCbar/" class=menu-list-link >Heatmaps, 1 shared colorbar</a> </ul> <li class="menu-list-parent "><a href="/BeautifulMakie/contour/" class=menu-list-link >• Contour plots</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/BeautifulMakie/contour/" class=menu-list-link >Simple countour</a> <li class="menu-list-item "><a href="/BeautifulMakie/contour/contourQubit/" class=menu-list-link >Contour Qubit</a> <li class="menu-list-item "><a href="/BeautifulMakie/contour/ContourComplexF/" class=menu-list-link >Contour Complex Functiont</a> </ul> <li class="menu-list-parent active"><a href="/BeautifulMakie/surfWireLines/" class=menu-list-link >• 3D plots</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/BeautifulMakie/surfWireLines/" class=menu-list-link >Surface branching</a> <li class="menu-list-item "><a href="/BeautifulMakie/surfWireLines/surface1Color/" class=menu-list-link >Surface, one color</a> <li class="menu-list-item "><a href="/BeautifulMakie/surfWireLines/surfaceComplexF/" class=menu-list-link >Surface, complex Function</a> <li class="menu-list-item "><a href="/BeautifulMakie/surfWireLines/revolutionSurf/" class=menu-list-link >Revolution Surface</a> <li class="menu-list-item "><a href="/BeautifulMakie/surfWireLines/revolutionSurf2/" class=menu-list-link >Revolution Surface 2</a> <li class="menu-list-item active"><a href="/BeautifulMakie/surfWireLines/KleinBottle/" class=menu-list-link >Klein Bottle</a> <li class="menu-list-item "><a href="/BeautifulMakie/surfWireLines/wireTori/" class=menu-list-link >Wireframe Tori</a> <li class="menu-list-item "><a href="/BeautifulMakie/surfWireLines/wireSurfToris/" class=menu-list-link >Wireframe and Surface Tori</a> <li class="menu-list-item "><a href="/BeautifulMakie/surfWireLines/tesseralSphericalH/" class=menu-list-link >Tesseral Spherical Harmonics</a> <li class="menu-list-item "><a href="/BeautifulMakie/surfWireLines/RGBcube/" class=menu-list-link >RGB cube</a> <li class="menu-list-item "><a href="/BeautifulMakie/surfWireLines/line3D/" class=menu-list-link >Line in 3D</a> </ul> <li class="menu-list-parent "><a href="/BeautifulMakie/GeoPlots/" class=menu-list-link >• Geo plots</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/BeautifulMakie/GeoPlots/" class=menu-list-link >Earth 3D</a> <li class="menu-list-item "><a href="/BeautifulMakie/GeoPlots/moon/" class=menu-list-link >The moon</a> <li class="menu-list-item "><a href="/BeautifulMakie/GeoPlots/landSea/" class=menu-list-link >Land, Sea and Lakes</a> <li class="menu-list-item "><a href="/BeautifulMakie/GeoPlots/temPrecESDL/" class=menu-list-link >ESDL data, temperature & precipitation</a> <li class="menu-list-item "><a href="/BeautifulMakie/GeoPlots/gppBeer2010/" class=menu-list-link >GPP Beer 2010, NetCDF file</a> <li class="menu-list-item "><a href="/BeautifulMakie/GeoPlots/topography/" class=menu-list-link >Surface, topography ETOPO1, NetCDF file</a> <li class="menu-list-item "><a href="/BeautifulMakie/GeoPlots/topographySphere/" class=menu-list-link >Surface sphere, topography ETOPO1, NetCDF file</a> <li class="menu-list-item "><a href="/BeautifulMakie/GeoPlots/topoLinesFuji/" class=menu-list-link >Topography, Lines Fuji, .tif file</a> </ul> <li class="menu-list-parent "><a href="/BeautifulMakie/withTheme/" class=menu-list-link >• with_theme </a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/BeautifulMakie/withTheme/" class=menu-list-link >theme_black</a> </ul> <li class="menu-list-parent "><a href="/BeautifulMakie/animations/" class=menu-list-link >• Animations </a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/BeautifulMakie/animations/" class=menu-list-link >Test NDVI</a> </ul> <li class="menu-list-parent "><a href="/BeautifulMakie/dashboards/" class=menu-list-link >• Dashboards </a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/BeautifulMakie/dashboards/" class=menu-list-link >WIP</a> </ul> </ul> </div> <div class=footer > <div class=copyright > &copy;	lazarusA </div> Built with <a href="https://franklinjl.org" target=_blank ><em>Franklin.jl</em></a>. </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <a id=github  href="https://github.com/lazarusA/BeautifulMakie">GitHub Repository</a> </div> <div class=franklin-content ><h2 id=klein_bottle ><a href="#klein_bottle" class=header-anchor >Klein Bottle</a></h2> <p><img src="/BeautifulMakie/assets/scripts/output/KleinBottle.png" alt=""> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> GLMakie
<span class=hljs-keyword >using</span> GeometryBasics, LinearAlgebra, StatsBase
<span class=hljs-keyword >using</span> Makie: get_dim, surface_normals
<span class=hljs-keyword >let</span>
    <span class=hljs-comment >### The bottle</span>
    u = <span class=hljs-built_in >LinRange</span>(<span class=hljs-number >0</span>,<span class=hljs-literal >π</span>,<span class=hljs-number >100</span>)
    v = <span class=hljs-built_in >LinRange</span>(<span class=hljs-number >0</span>,<span class=hljs-number >2</span><span class=hljs-literal >π</span>,<span class=hljs-number >100</span>)
    x = [-<span class=hljs-number >2</span>/<span class=hljs-number >15</span> * cos(u)*(<span class=hljs-number >3</span>*cos(v) - <span class=hljs-number >30</span>*sin(u) + <span class=hljs-number >90</span>*cos(u)^<span class=hljs-number >4</span> *sin(u)
            - <span class=hljs-number >60</span>*cos(u)^<span class=hljs-number >6</span> * sin(u) + <span class=hljs-number >5</span>*cos(u)*cos(v)*sin(u)) <span class=hljs-keyword >for</span> u <span class=hljs-keyword >in</span> u, v <span class=hljs-keyword >in</span> v]
    y = [-<span class=hljs-number >1</span>/<span class=hljs-number >15</span> * sin(u)*(<span class=hljs-number >3</span>*cos(v) - <span class=hljs-number >3</span>*cos(u)^<span class=hljs-number >2</span>*cos(v) - <span class=hljs-number >48</span>*cos(u)^<span class=hljs-number >4</span> *cos(v) + <span class=hljs-number >48</span>*cos(u)^<span class=hljs-number >6</span> *cos(v)
            - <span class=hljs-number >60</span>*sin(u) + <span class=hljs-number >5</span>*cos(u)*cos(v)*sin(u) - <span class=hljs-number >5</span>*cos(u)^<span class=hljs-number >3</span>*cos(v)*sin(u)
            -<span class=hljs-number >80</span>*cos(u)^<span class=hljs-number >5</span> * cos(v)*sin(u) + <span class=hljs-number >80</span>*cos(u)^<span class=hljs-number >7</span>*cos(v)*sin(u)) <span class=hljs-keyword >for</span> u <span class=hljs-keyword >in</span> u, v <span class=hljs-keyword >in</span> v]
    z = [<span class=hljs-number >2</span>/<span class=hljs-number >15</span> * (<span class=hljs-number >3</span> + <span class=hljs-number >5</span>*cos(u)*sin(u))*sin(v) <span class=hljs-keyword >for</span> u <span class=hljs-keyword >in</span> u, v <span class=hljs-keyword >in</span> v]

    <span class=hljs-keyword >function</span> getMesh(x,y,z)
        positions = vec(map(<span class=hljs-built_in >CartesianIndices</span>(z)) <span class=hljs-keyword >do</span> i
        GeometryBasics.Point{<span class=hljs-number >3</span>, <span class=hljs-built_in >Float32</span>}(
            get_dim(x, i, <span class=hljs-number >1</span>, size(z)),
            get_dim(y, i, <span class=hljs-number >2</span>, size(z)),
            z[i])
        <span class=hljs-keyword >end</span>)
        faces = decompose(GLTriangleFace, Rect2D(<span class=hljs-number >0f0</span>, <span class=hljs-number >0f0</span>, <span class=hljs-number >1f0</span>, <span class=hljs-number >1f0</span>), size(z))
        normals = surface_normals(x, y, z)
        vertices = GeometryBasics.meta(positions; normals=normals)
        meshObj = GeometryBasics.Mesh(vertices, faces)
        meshObj
    <span class=hljs-keyword >end</span>
    meshKlein = getMesh(x,y,z)
    fig = Figure(resolution = (<span class=hljs-number >1200</span>, <span class=hljs-number >800</span>), backgroundcolor = :white)
    fig.layout.alignmode[] = Outside(<span class=hljs-number >0</span>)
    ax = LScene(fig, scenekw = (camera = cam3d!, show_axis = <span class=hljs-literal >false</span>))
    mesh!(ax,meshKlein, color = [norm(v) <span class=hljs-keyword >for</span> v <span class=hljs-keyword >in</span> coordinates(meshKlein)],
        colormap = (:Spectral_11,<span class=hljs-number >0.95</span>))
    rotate_cam!(ax.scene, (-<span class=hljs-number >1.5</span>,<span class=hljs-number >0</span>,<span class=hljs-number >0</span>))
    fig[<span class=hljs-number >1</span>,<span class=hljs-number >1</span>] = ax
    fig
<span class=hljs-keyword >end</span></code></pre> <span style="color:#e53e00;"> <strong> Dependencies </strong> </span> <div class=code-output ><pre><code class="plaintext hljs">      Status `~/Documents/BeaufitulMakie/Project.toml`
  [e9467ef8] GLMakie v0.3.2
  [5c1252a2] GeometryBasics v0.3.12
  [ee78f7c6] Makie v0.13.11
  [2913bbd2] StatsBase v0.33.8
  [37e2e46d] LinearAlgebra
</code></pre></div></p> <div class=page-foot > <div align=right > Last Updated: June 07, 2021 </div> </div> </div> </div> </div> </div> <!-- end of class page-wrap--> <script> (function(){ // Get the elements. // - the 'pre' element. // - the 'div' with the 'paste-content' id. var pre = document.getElementsByTagName('pre'); // Add a copy button in the 'pre' element. // which only has the className of 'language-'. for (var i = 0; i < pre.length; i++) { var isLanguage = pre[i].children[0].className.indexOf('language-'); if ( isLanguage === 0 ) { var button = document.createElement('button'); button.className = 'copy-button'; button.textContent = 'Copy'; pre[i].appendChild(button); } }; // Run Clipboard var copyCode = new Clipboard('.copy-button', { target: function(trigger) { return trigger.previousElementSibling; } }); // On success: // - Change the "Copy" text to "Copied". // - Swap it to "Copy" in 2s. // - Lead user to the "contenteditable" area with Velocity scroll. copyCode.on('success', function(event) { event.clearSelection(); event.trigger.textContent = 'Copied'; window.setTimeout(function() { event.trigger.textContent = 'Copy'; }, 2000); }); // On error (Safari): // - Change the "Press Ctrl+C to copy" // - Swap it to "Copy" in 2s. copyCode.on('error', function(event) { event.trigger.textContent = 'Press "Ctrl + C" to copy'; window.setTimeout(function() { event.trigger.textContent = 'Copy'; }, 5000); }); })(); </script>